{
  "type": "carousel",
  "contents": [
    {
      "type": "bubble",
      "size": "giga",
      "body": {
        "type": "box",
        "layout": "vertical",
        "contents": [
          {
            "type": "box",
            "layout": "vertical",
            "contents": [
              {
                "type": "text",
                "text": "กำหนดเวลานัดหมาย",
                "size": "xl",
                "weight": "bold"
              },
              {
                "type": "box",
                "layout": "vertical",
                "contents": [
                  {
                    "type": "text",
                    "text": "บริการ",
                    "size": "sm",
                    "color": "#AAAAAA",
                    "margin": "sm"
                  },
                  {
                    "type": "text",
                    "text": "[(${service.name})]",
                    "size": "lg",
                    "weight": "bold",
                    "wrap": true
                  },
                  {
                    "type": "text",
                    "text": "[(${choice.name})]",
                    "size": "md",
                    "weight": "bold",
                    "wrap": true
                  }
                ]
              },
              {
                "type": "box",
                "layout": "baseline",
                "contents": [
                  {
                    "type": "text",
                    "text": "[(${choice.price})]",
                    "size": "lg",
                    "weight": "bold",
                    "wrap": true,
                    "flex": 0
                  },
                  {
                    "type": "text",
                    "text": "บาท",
                    "size": "sm",
                    "weight": "bold",
                    "wrap": true,
                    "margin": "sm",
                    "flex": 0
                  }
                ],
                "margin": "sm"
              },
              {
                "type": "box",
                "layout": "horizontal",
                "contents": [
                  {
                    "type": "text",
                    "text": "[(${service.desc})]",
                    "size": "xs",
                    "wrap": true,
                    "flex": 3
                  },
                  {
                    "type": "separator",
                    "margin": "sm"
                  },
                  {
                    "type": "text",
                    "text": "[(${choice.desc})]",
                    "size": "xs",
                    "wrap": true,
                    "margin": "sm",
                    "flex": 2
                  }
                ],
                "margin": "md"
              },
              {
                "type": "box",
                "layout": "horizontal",
                "contents": [
                  {
                    "type": "text",
                    "text": "สถานที่",
                    "color": "#aaaaaa",
                    "size": "sm",
                    "flex": 1
                  },
                  {
                    "type": "text",
                    "flex": 3,
                    "text": "[(${choice.location})]",
                    "size": "sm",
                    "margin": "md",
                    "wrap": true
                  }
                ],
                "margin": "md"
              },
              {
                "type": "box",
                "layout": "horizontal",
                "contents": [
                  {
                    "type": "text",
                    "text": "ระยะเวลา",
                    "color": "#aaaaaa",
                    "size": "sm",
                    "flex": 1
                  },
                  {
                    "type": "text",
                    "flex": 3,
                    "text": "[(${choice.duration})]",
                    "size": "sm",
                    "margin": "md"
                  }
                ],
                "spacing": "none",
                "margin": "md"
              },
              {
                "type": "box",
                "layout": "vertical",
                "contents": [
                  {
                    "type": "text",
                    "text": "วันที่นัดหมาย",
                    "size": "sm",
                    "color": "#AAAAAA",
                    "margin": "none",
                    "flex": 1
                  },
                  {
                    "type": "box",
                    "layout": "horizontal",
                    "contents": [
                      {
                        "type": "text",
                        "text": "[(${date.dow})]",
                        "size": "sm",
                        "weight": "bold",
                        "wrap": true,
                        "flex": 0
                      },
                      {
                        "type": "text",
                        "text": "[(${date.day})]",
                        "size": "lg",
                        "weight": "bold",
                        "wrap": true,
                        "flex": 0,
                        "margin": "sm"
                      }
                    ],
                    "justifyContent": "flex-start",
                    "alignItems": "center",
                    "margin": "xs"
                  },
                  {
                    "type": "text",
                    "text": "[(${date.rel})]",
                    "size": "sm",
                    "margin": "none"
                  }
                ],
                "margin": "lg"
              }
             ],
             "flex": 1
           },
           {
             "type": "text",
             "text": "เลือกช่วงเวลาที่ต้องการได้ทางด้านขวา",
             "size": "sm",
             "margin": "lg",
             "align": "center",
             "color": "#AAAAAA"
           }
        ]
      }
    },
    {
      "type": "bubble",
      "size": "giga",
      "body": {
        "type": "box",
        "layout": "vertical",
        "contents": [
          {
            "type": "text",
            "size": "lg",
            "text": "แผนผังเวลาว่าง",
            "weight": "bold",
            "gravity": "center"
          },
          {
            "type": "text",
            "text": "เลือกเวลาที่ต้องการได้ทางด้านขวา",
            "color": "#A0A0A0",
            "size": "sm"
          },
          {
            "type": "text",
            "size": "md",
            "text": "[(${date.full_day})]",
            "weight": "bold",
            "gravity": "center",
            "margin": "lg"
          },
          [# th:each="row : ${rows}"]
          {
            "type": "text",
            "text": "[(${row.label})]",
            "size": "md",
            "margin": "lg",
            "weight": "bold"
          },
          {
            "type": "box",
            "layout": "horizontal",
            "contents": [
            [# th:each="t,i : ${row.times}"]
              [# th:unless="${i.first}"],[/]
              {
                "type": "text",
                "text": "[(${t})]",
                "size": "sm"
              }
            [/]
            ]
          },
          {
            "type": "box",
            "layout": "horizontal",
            "contents": [
            [# th:each="x,i : ${row.bar}"]
              [# th:unless="${i.first}"],[/]
              {
                "type": "box",
                "layout": "horizontal",
                "contents": [
                [# th:each="y,i : ${x}"]
                  [# th:unless="${i.first}"],[/]
                  {
                    "type": "box",
                    "layout": "vertical",
                    "contents": [],
                    "margin": "none",
                     [# th:if="${y}"] "backgroundColor": "#60FF60" [/]
                     [# th:unless="${y}"] "backgroundColor": "#A0A0A0"[/]
                  }
                [/]
                ],
                "flex": 1,
                "borderWidth": "normal",
                "borderColor": "#000000"
              }
            [/]
            ],
            "height": "25px"
          },
          [/]
          {
            "type": "text",
            "text": "อัปเดตล่าสุด: [(${updated})]",
            "color": "#A0A0A0",
            "size": "xs",
            "margin": "lg"
          }
        ]
      }
    }
    [# th:each="block : ${blocks}"]
      ,{
        "type": "bubble",
        "size": "giga",
        "body": {
          "type": "box",
          "layout": "vertical",
          "contents": [
            {
              "type": "text",
              "size": "lg",
              "text": "[(${block.label})]",
              "weight": "bold",
              "gravity": "center"
            },
            {
              "type": "text",
              "size": "md",
              "text": "[(${date.full_day})]",
              "weight": "bold",
              "gravity": "center"
            }
            [# th:each="row : ${block.rows}"]
            ,{
              "type": "box",
              "layout": "vertical",
              "contents": [
                {
                  "type": "box",
                  "layout": "horizontal",
                  "contents": [
                    {
                      "type": "button",
                      "action": {
                        "type": "postback",
                        "label": "[(${row.time[0]})]",
                        "data": "schedule?frame=[(${row.frame[0]})]",
                        "displayText": "[(${row.time[0]})]"
                      },
                      "style": "secondary",
                      "height": "sm",
                      [# th:if="${row.free[0]}"]"color": "#60FF60"[/]
                      [# th:unless="${row.free[0]}"]"color": "#A0A0A0"[/]
                    },
                    {
                      "type": "button",
                      "action": {
                        "type": "postback",
                        "label": "[(${row.time[1]})]",
                        "data": "schedule?frame=[(${row.frame[1]})]",
                        "displayText": "[(${row.time[1]})]"
                      },
                      "style": "secondary",
                      "height": "sm",
                      "margin": "sm",
                      [# th:if="${row.free[1]}"]"color": "#60FF60"[/]
                      [# th:unless="${row.free[1]}"]"color": "#A0A0A0"[/]
                    }
                  ]
                },
                {
                  "type": "box",
                  "layout": "horizontal",
                  "contents": [
                    {
                      "type": "button",
                      "action": {
                        "type": "postback",
                        "label": "[(${row.time[2]})]",
                        "data": "schedule?frame=[(${row.frame[2]})]",
                        "displayText": "[(${row.time[2]})]"
                      },
                      "style": "secondary",
                      "height": "sm",
                      [# th:if="${row.free[2]}"]"color": "#60FF60"[/]
                      [# th:unless="${row.free[2]}"]"color": "#A0A0A0"[/]
                    },
                    {
                      "type": "button",
                      "action": {
                        "type": "postback",
                        "label": "[(${row.time[3]})]",
                        "data": "schedule?frame=[(${row.frame[3]})]",
                        "displayText": "[(${row.time[3]})]"
                      },
                      "style": "secondary",
                      "height": "sm",
                      "margin": "sm",
                      [# th:if="${row.free[3]}"]"color": "#60FF60"[/]
                      [# th:unless="${row.free[3]}"]"color": "#A0A0A0"[/]
                    }

                  ],
                  "margin": "sm"
                }
              ],
              "margin": "lg"
            }
            [/]
          ]
        }
      }
    [/]
  ]
}

